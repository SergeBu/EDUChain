# language: ru
@requires_contract

Функционал: Стейкинг EDU токенов в экосистеме EDUChain

  Контекст:
    - Максимальная сумма стейкинга: 10 000 EDU
    - Разрешенные роли: Student, Professor
    - Контракт может быть приостановлен администратором

@educhain
  Сценарий: Успешный стейкинг студентом
    И Контракт не находится в состоянии паузы
    И Пользователь "alice" имеет роль "Student"
    И Кошелек "alice" имеет баланс ≥ 500 EDU
    Когда Пользователь "alice" вызывает метод stake(500)
    Тогда Баланс стейкинга "alice" увеличивается на 500 EDU
     И Событие Staked эмитируется с параметрами ("alice", 500)


@educhain
  Сценарий: Попытка стейкинга нулевой суммы
    И Пользователь "bob" имеет роль "Professor"
    Когда Пользователь "bob" вызывает метод stake(0)
    Тогда Транзакция отменена с ошибкой "Amount must be > 0"
    И Баланс стейкинга "bob" не изменяется

  Сценарий: Стейкинг при приостановленном контракте
    Дано Администратор приостановил контракт
    И Пользователь "carol" имеет роль "Student"
    Когда Пользователь "carol" вызывает метод stake(200)
    Тогда Транзакция отменена с ошибкой "Contract is paused"

  Сценарий: Нарушение ролевой политики
    Дано Контракт активен
    И Пользователь "dave" имеет роль "Investor"
    Когда Пользователь "dave" вызывает метод stake(1000)
    Тогда Транзакция отменена с ошибкой "Access denied: Only Student/Professor"
	
  Сценарий: Граничные значения
    И Пользователь "bob" имеет роль "Professor"
    И Кошелек "bob" имеет баланс ≥ <amount> EDU
    Когда Пользователь "bob" вызывает метод stake(<amount>)
    Тогда <ожидаемый_результат>
    И сообщение об ошибке содержит "<сообщение_ошибки>"
    
 Примеры:
    | amount | ожидаемый_результат | сообщение_ошибки   |
    | 1      | успешно             |                    |
    | 10000  | успешно             |                    |
    | 10001  | ошибка              | Exceeds max stake  |
	  